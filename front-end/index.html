<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css" />
</head>
<script type="module">
    import {AlbumShufflerApi} from './api.js';

    function selectProvider(provider) {
        let api = new AlbumShufflerApi();
        if (provider === 'SPOTIFY') {
            api.login_spotify();
        }
    }

    document.onreadystatechange = function () {
        if (document.readyState == "complete") {
            const item = localStorage.getItem('albumShuffler.spotify.authToken');
            if (item != null) {
                window.location = '/spotify.html';
            } else {
                document.getElementById("main").style.display = "block";
            }
      }
    }

    window.selectProvider = selectProvider;
</script>
<body>
    <main id="main" hidden>
        <h1>Please select your music provider</h1>
        <a href="javascript:void(0);" onclick="selectProvider('SPOTIFY')">
            <img src='./assets/img/Spotify_Logo_RGB_Green.png' alt='missing' width=400 />
        </a>
    </main>
</body>